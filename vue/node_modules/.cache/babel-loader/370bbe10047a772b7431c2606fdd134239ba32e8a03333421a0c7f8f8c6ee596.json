{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nexport default {\n  name: 'Type',\n  data() {\n    return {\n      categoryId: null,\n      categoryName: '商品分类',\n      goods: [],\n      originalGoods: [],\n      // 保存原始商品数据\n      filteredGoods: [],\n      searchKeyword: '',\n      priceRange: [0, 50000],\n      selectedBrands: [],\n      sortBy: 'default',\n      brands: ['Trek', 'Specialized', 'Giant', 'Cannondale', 'Scott']\n    };\n  },\n  created() {\n    this.categoryId = this.$route.query.id;\n    this.loadGoods();\n  },\n  methods: {\n    loadGoods() {\n      this.$request.get('/goods/selectByTypeId', {\n        params: {\n          id: this.categoryId\n        }\n      }).then(res => {\n        if (res.code === '200') {\n          this.goods = res.data;\n          this.originalGoods = [...res.data];\n          this.filteredGoods = [...this.goods];\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    handleSearch() {\n      if (!this.searchKeyword.trim()) {\n        this.goods = [...this.originalGoods];\n        this.handleFilter();\n        return;\n      }\n      this.goods = this.originalGoods.filter(item => item.name.toLowerCase().includes(this.searchKeyword.toLowerCase()));\n      this.handleFilter();\n    },\n    handleFilter() {\n      let filtered = [...this.goods];\n\n      // 价格筛选\n      filtered = filtered.filter(item => item.price >= this.priceRange[0] && item.price <= this.priceRange[1]);\n\n      // 品牌筛选\n      if (this.selectedBrands.length > 0) {\n        filtered = filtered.filter(item => this.selectedBrands.includes(item.brand));\n      }\n\n      // 排序\n      switch (this.sortBy) {\n        case 'priceAsc':\n          filtered.sort((a, b) => a.price - b.price);\n          break;\n        case 'priceDesc':\n          filtered.sort((a, b) => b.price - a.price);\n          break;\n        default:\n          // 保持原有顺序\n          break;\n      }\n      this.filteredGoods = filtered;\n    },\n    resetFilters() {\n      this.priceRange = [0, 50000];\n      this.selectedBrands = [];\n      this.sortBy = 'default';\n      this.searchKeyword = '';\n      this.goods = [...this.originalGoods];\n      this.filteredGoods = [...this.goods];\n    },\n    navTo(url) {\n      location.href = url;\n    }\n  }\n};","map":{"version":3,"names":["name","data","categoryId","categoryName","goods","originalGoods","filteredGoods","searchKeyword","priceRange","selectedBrands","sortBy","brands","created","$route","query","id","loadGoods","methods","$request","get","params","then","res","code","$message","error","msg","handleSearch","trim","handleFilter","filter","item","toLowerCase","includes","filtered","price","length","brand","sort","a","b","resetFilters","navTo","url","location","href"],"sources":["src/views/front/Type.vue"],"sourcesContent":["<template>\r\n  <div class=\"main-content\">\r\n    <div class=\"container\">\r\n      <!-- 搜索框 -->\r\n      <div class=\"search-container\">\r\n        <div class=\"search-box\">\r\n          <el-input\r\n            v-model=\"searchKeyword\"\r\n            placeholder=\"搜索商品\"\r\n            prefix-icon=\"el-icon-search\"\r\n            clearable\r\n            @keyup.enter.native=\"handleSearch\"\r\n          >\r\n            <el-button \r\n              slot=\"append\" \r\n              icon=\"el-icon-search\"\r\n              @click=\"handleSearch\">\r\n              搜索\r\n            </el-button>\r\n          </el-input>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"content-area\">\r\n        <!-- 筛选器侧边栏 -->\r\n        <div class=\"filter-sidebar\">\r\n          <div class=\"filter-section\">\r\n            <h3>价格区间</h3>\r\n            <el-slider\r\n              v-model=\"priceRange\"\r\n              range\r\n              :min=\"0\"\r\n              :max=\"50000\"\r\n              :step=\"100\"\r\n              @change=\"handleFilter\"\r\n            ></el-slider>\r\n            <div class=\"price-range-text\">\r\n              ¥{{ priceRange[0] }} - ¥{{ priceRange[1] }}\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"filter-section\">\r\n            <h3>品牌</h3>\r\n            <el-checkbox-group v-model=\"selectedBrands\" @change=\"handleFilter\">\r\n              <el-checkbox \r\n                v-for=\"brand in brands\" \r\n                :key=\"brand\" \r\n                :label=\"brand\">\r\n                {{ brand }}\r\n              </el-checkbox>\r\n            </el-checkbox-group>\r\n          </div>\r\n\r\n          <div class=\"filter-section\">\r\n            <h3>排序方式</h3>\r\n            <el-radio-group v-model=\"sortBy\" @change=\"handleFilter\">\r\n              <el-radio label=\"default\">默认</el-radio>\r\n              <el-radio label=\"priceAsc\">价格从低到高</el-radio>\r\n              <el-radio label=\"priceDesc\">价格从高到低</el-radio>\r\n            </el-radio-group>\r\n          </div>\r\n\r\n          <el-button type=\"primary\" @click=\"resetFilters\" class=\"reset-btn\">\r\n            重置筛选\r\n          </el-button>\r\n        </div>\r\n\r\n        <!-- 商品展示区域 -->\r\n        <div class=\"goods-container\">\r\n          <div class=\"goods-header\">\r\n            <h2>{{ categoryName }}</h2>\r\n            <span class=\"goods-count\">共 {{ filteredGoods.length }} 个商品</span>\r\n          </div>\r\n\r\n          <div class=\"goods-grid\">\r\n            <div \r\n              v-for=\"item in filteredGoods\" \r\n              :key=\"item.id\" \r\n              class=\"goods-card\"\r\n              @click=\"navTo('/front/detail?id=' + item.id)\"\r\n            >\r\n              <div class=\"goods-img\">\r\n                <img :src=\"item.img\" :alt=\"item.name\">\r\n              </div>\r\n              <div class=\"goods-info\">\r\n                <h3>{{ item.name }}</h3>\r\n                <p class=\"goods-desc\">{{ item.description }}</p>\r\n                <div class=\"price\">¥{{ item.price }}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 无数据提示 -->\r\n          <div v-if=\"filteredGoods.length === 0\" class=\"no-data\">\r\n            <i class=\"el-icon-warning-outline\"></i>\r\n            <p>暂无相关商品</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Type',\r\n  data() {\r\n    return {\r\n      categoryId: null,\r\n      categoryName: '商品分类',\r\n      goods: [],\r\n      originalGoods: [], // 保存原始商品数据\r\n      filteredGoods: [],\r\n      searchKeyword: '',\r\n      priceRange: [0, 50000],\r\n      selectedBrands: [],\r\n      sortBy: 'default',\r\n      brands: ['Trek', 'Specialized', 'Giant', 'Cannondale', 'Scott']\r\n    }\r\n  },\r\n  created() {\r\n    this.categoryId = this.$route.query.id\r\n    this.loadGoods()\r\n  },\r\n  methods: {\r\n    loadGoods() {\r\n      this.$request.get('/goods/selectByTypeId', {\r\n        params: {\r\n          id: this.categoryId\r\n        }\r\n      }).then(res => {\r\n        if (res.code === '200') {\r\n          this.goods = res.data\r\n          this.originalGoods = [...res.data]\r\n          this.filteredGoods = [...this.goods]\r\n        } else {\r\n          this.$message.error(res.msg)\r\n        }\r\n      })\r\n    },\r\n\r\n    handleSearch() {\r\n      if (!this.searchKeyword.trim()) {\r\n        this.goods = [...this.originalGoods]\r\n        this.handleFilter()\r\n        return\r\n      }\r\n      \r\n      this.goods = this.originalGoods.filter(item => \r\n        item.name.toLowerCase().includes(this.searchKeyword.toLowerCase())\r\n      )\r\n      this.handleFilter()\r\n    },\r\n\r\n    handleFilter() {\r\n      let filtered = [...this.goods]\r\n\r\n      // 价格筛选\r\n      filtered = filtered.filter(item => \r\n        item.price >= this.priceRange[0] && item.price <= this.priceRange[1]\r\n      )\r\n\r\n      // 品牌筛选\r\n      if (this.selectedBrands.length > 0) {\r\n        filtered = filtered.filter(item => \r\n          this.selectedBrands.includes(item.brand)\r\n        )\r\n      }\r\n\r\n      // 排序\r\n      switch (this.sortBy) {\r\n        case 'priceAsc':\r\n          filtered.sort((a, b) => a.price - b.price)\r\n          break\r\n        case 'priceDesc':\r\n          filtered.sort((a, b) => b.price - a.price)\r\n          break\r\n        default:\r\n          // 保持原有顺序\r\n          break\r\n      }\r\n\r\n      this.filteredGoods = filtered\r\n    },\r\n\r\n    resetFilters() {\r\n      this.priceRange = [0, 50000]\r\n      this.selectedBrands = []\r\n      this.sortBy = 'default'\r\n      this.searchKeyword = ''\r\n      this.goods = [...this.originalGoods]\r\n      this.filteredGoods = [...this.goods]\r\n    },\r\n\r\n    navTo(url) {\r\n      location.href = url\r\n    }\r\n  }\r\n}\r\n</script>"],"mappings":";;AAwGA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,UAAA;MACAC,YAAA;MACAC,KAAA;MACAC,aAAA;MAAA;MACAC,aAAA;MACAC,aAAA;MACAC,UAAA;MACAC,cAAA;MACAC,MAAA;MACAC,MAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAV,UAAA,QAAAW,MAAA,CAAAC,KAAA,CAAAC,EAAA;IACA,KAAAC,SAAA;EACA;EACAC,OAAA;IACAD,UAAA;MACA,KAAAE,QAAA,CAAAC,GAAA;QACAC,MAAA;UACAL,EAAA,OAAAb;QACA;MACA,GAAAmB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAnB,KAAA,GAAAkB,GAAA,CAAArB,IAAA;UACA,KAAAI,aAAA,OAAAiB,GAAA,CAAArB,IAAA;UACA,KAAAK,aAAA,YAAAF,KAAA;QACA;UACA,KAAAoB,QAAA,CAAAC,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA;IACA;IAEAC,aAAA;MACA,UAAApB,aAAA,CAAAqB,IAAA;QACA,KAAAxB,KAAA,YAAAC,aAAA;QACA,KAAAwB,YAAA;QACA;MACA;MAEA,KAAAzB,KAAA,QAAAC,aAAA,CAAAyB,MAAA,CAAAC,IAAA,IACAA,IAAA,CAAA/B,IAAA,CAAAgC,WAAA,GAAAC,QAAA,MAAA1B,aAAA,CAAAyB,WAAA,GACA;MACA,KAAAH,YAAA;IACA;IAEAA,aAAA;MACA,IAAAK,QAAA,YAAA9B,KAAA;;MAEA;MACA8B,QAAA,GAAAA,QAAA,CAAAJ,MAAA,CAAAC,IAAA,IACAA,IAAA,CAAAI,KAAA,SAAA3B,UAAA,OAAAuB,IAAA,CAAAI,KAAA,SAAA3B,UAAA,GACA;;MAEA;MACA,SAAAC,cAAA,CAAA2B,MAAA;QACAF,QAAA,GAAAA,QAAA,CAAAJ,MAAA,CAAAC,IAAA,IACA,KAAAtB,cAAA,CAAAwB,QAAA,CAAAF,IAAA,CAAAM,KAAA,CACA;MACA;;MAEA;MACA,aAAA3B,MAAA;QACA;UACAwB,QAAA,CAAAI,IAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAD,CAAA,CAAAJ,KAAA,GAAAK,CAAA,CAAAL,KAAA;UACA;QACA;UACAD,QAAA,CAAAI,IAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAA,CAAA,CAAAL,KAAA,GAAAI,CAAA,CAAAJ,KAAA;UACA;QACA;UACA;UACA;MACA;MAEA,KAAA7B,aAAA,GAAA4B,QAAA;IACA;IAEAO,aAAA;MACA,KAAAjC,UAAA;MACA,KAAAC,cAAA;MACA,KAAAC,MAAA;MACA,KAAAH,aAAA;MACA,KAAAH,KAAA,YAAAC,aAAA;MACA,KAAAC,aAAA,YAAAF,KAAA;IACA;IAEAsC,MAAAC,GAAA;MACAC,QAAA,CAAAC,IAAA,GAAAF,GAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}